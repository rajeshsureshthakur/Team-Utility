@echo off
setlocal enabledelayedexpansion

:: Set base folder paths
set BASE_FOLDER=%~dp0
set PARENT_FOLDER=%BASE_FOLDER%..\RESULTS
set "PARENT_FOLDER=%~dp0..\RESULTS"
for %%A in ("%PARENT_FOLDER%") do set "PARENT_FOLDER=%%~fA"

:: Get today's date in MMDD format
for /f "tokens=1-3 delims=/ " %%a in ('date /t') do (
    set mm=%%a
    set dd=%%b
)
set DATE=%mm%%dd%

:: Find the next folder number
set COUNT=1
:checkfolder
set FOLDER_NAME=RESULTS_%DATE%_%COUNT%
if exist "%PARENT_FOLDER%\%FOLDER_NAME%" (
    set /a COUNT+=1
    goto checkfolder
)

:: Create main folder
set NEW_FOLDER=%PARENT_FOLDER%\%FOLDER_NAME%
mkdir "%NEW_FOLDER%"
mkdir "%NEW_FOLDER%\Input_Files"
mkdir "%NEW_FOLDER%\Output_Files"
mkdir "%NEW_FOLDER%\Test_Files"

:: âœ… Call Java file with path as argument
java -cp yourClasspath YourJavaFile "%NEW_FOLDER%"

echo Folder created at: %NEW_FOLDER%
